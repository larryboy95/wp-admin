# Live site:
server {
	# Enable Gzip (https://github.com/darktable/html5-boilerplate-server-configs/blob/master/nginx.conf)
	gzip  on;
	gzip_http_version 1.0;
	gzip_comp_level 2;
	gzip_min_length 1100;
	gzip_buffers     4 8k;
	gzip_proxied any;
	gzip_types
		# text/html is always compressed by HttpGzipModule
		text/css
		text/javascript
		text/xml
		text/plain
		text/x-component
		application/javascript
		application/json
		application/xml
		application/rss+xml
		font/truetype
		font/opentype
		application/vnd.ms-fontobject
		image/svg+xml;

	gzip_static on;
	gzip_proxied        expired no-cache no-store private auth;
	gzip_disable        "MSIE [1-6]\.";
	gzip_vary           on;
    	# SSL configuration
    	listen 443 ssl http2 default_server;
    	listen [::]:443 ssl http2 default_server;
    	include snippets/ssl-certs.conf;
    	include snippets/ssl-params.conf;
	#
	root /var/www/html;
	index index.php index.html index.htm;
	# Make site accessible from http://localhost/
	server_name localhost;
	#
	location / {
		# For clean URLs in WordPress:
		try_files $uri $uri/ /index.php?$args;
	}
	error_page 404 /404.html;
	error_page 500 502 503 504 /50x.html;
	location = /50x.html {
		root /usr/share/nginx/html;
	}
	location ~ \.php$ {
	        include snippets/fastcgi-php.conf;
	        fastcgi_pass unix:/run/php/php7.0-fpm.sock;
	}
	# from: https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-with-lemp-on-ubuntu-16-04
	location = /favicon.ico { log_not_found off; access_log off; }
	location = /robots.txt { log_not_found off; access_log off; allow all; }
    	location ~* \.(css|gif|ico|jpeg|jpg|js|png)$ {
        expires max;
        log_not_found off;
    }
	# from: https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-16-04 
	location ~ /.well-known {
                allow all;
        }
}
# Redirect http requests to https:
server {
	listen 80 default_server;
	listen [::]:80 default_server;
	server_name [FQDN];
	return 301 https://$server_name$request_uri;
}

